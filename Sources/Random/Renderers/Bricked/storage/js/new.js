var dropdown_open=0;var emoji_dropdown_open=0;var emojis_loaded=0;var fetchedNotifications=0;$(document).ready(function($){$(document).foundation();$.ajaxSetup({headers:{'CSRF':$('meta[name="csrf-token"]').attr('content')}});var dropdownOpen=0;window.onclick=function(event){if(event.target.matches?event.target.matches('#menu-search'):event.target.msMatchesSelector("#menu-search")){if(document.getElementById("search-dropdown").style.display=="none"){$('#search-dropdown').foundation('toggle','off');}}
if(document.getElementById("user-dropdown-all")!==null&&document.getElementById("user-dropdown-all").style.display!="none"){if(event.target.matches?!event.target.matches('#user-dropdown-all, #user-dropdown-all *, .menu-avatar-preview-thumbnail'):!event.target.msMatchesSelector("#user-dropdown-all, #user-dropdown-all *, .menu-avatar-preview-thumbnail")){$('#user-dropdown-all').foundation('toggle','off');}}
if(document.getElementById("user-notifications")!==null&&document.getElementById("user-notifications").style.display!="none"){if(event.target.matches?!event.target.matches('#user-notifications, #user-notifications *'):!event.target.msMatchesSelector("#user-notifications, #user-notifications *")){$('#user-notifications').foundation('toggle','off');}}
if(document.getElementById("EmojiDropdown")?document.getElementById("EmojiDropdown").style.display!="none":1==2){if(event.target.matches?!event.target.matches('#EmojiDropdown, #EmojiDropdown *'):!event.target.msMatchesSelector("#EmojiDropdown, #EmojiDropdown *")){$('#EmojiDropdown').foundation('toggle','off');}}
if(document.getElementById("search-dropdown").style.display!="none"){if(event.target.matches?!event.target.matches('#search-dropdown, #search-dropdown *, #menu-search'):!event.target.msMatchesSelector("#search-dropdown, #search-dropdown *, #menu-search")){$('#search-dropdown').foundation('toggle','off');}}}
$(document).on("click",".show-more-button",function(){if($(this).attr('data-more')==0){$(this).attr('data-more',1);$(this).css('display','block');$(this).text('Show Less');$(this).prev().css('display','none');$(this).prev().prev().css('display','inline');}
else if(this.getAttribute('data-more')==1){$(this).attr('data-more',0);$(this).css('display','inline');$(this).text('Show More');$(this).prev().css('display','inline');$(this).prev().prev().css('display','none');}});});function modalError(title,content){$("#errorTitle").text(title);$("#errorMessage").html(content);$("#errorModal").foundation("open");}
const number_format=(x)=>{return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}
function searchSite(query){if(query.length>=3&&query!=" "&&!query.startsWith('../')){document.getElementById("show-recent").style.display="none";var xhr=new XMLHttpRequest();xhr.open("GET","/search/fetch/"+query,true);xhr.onload=function(e){if(xhr.readyState===4){if(xhr.status===200){if(xhr.responseText!='<div class="search-dropdown-title">QUICK RESULTS</div><ul><div class="search-dropdown-error">No results found.</div></ul>'){document.getElementById('search-dropdown-content').innerHTML=xhr.responseText;}}}};xhr.send(null);}else if(!query||query.length<3||query==" "){document.getElementById("search-dropdown-content").innerHTML="";document.getElementById("show-recent").style.display="block";}}